(this.webpackJsonpconfig_website=this.webpackJsonpconfig_website||[]).push([[0],{39:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),a=n(15),o=n.n(a),s=(n(39),n(32)),c=n(12),l=n(13),d=n(19),u=n(18),h=n(54),p=n(50),j=n(51),v=n(55),b=n(49),f=n(17),x=n.n(f),O=n(27),m="http://"+window.location.host+"/tvStation",g=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,null,[{key:"getAll",value:function(){var t=Object(O.a)(x.a.mark((function t(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(m,{method:"GET"});case 2:return e=t.sent,t.next=5,e.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"insertOrUpdate",value:function(){var t=Object(O.a)(x.a.mark((function t(){var e,n,i,r,a,o,s=arguments;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=s.length,n=new Array(e),i=0;i<e;i++)n[i]=s[i];r=0,a=n;case 2:if(!(r<a.length)){t.next=9;break}return o=a[r],t.next=6,fetch(m+y(o),{method:o.id?"PUT":"POST"});case 6:r++,t.next=2;break;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(O.a)(x.a.mark((function t(){var e,n,i,r,a,o,s=arguments;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=s.length,n=new Array(e),i=0;i<e;i++)n[i]=s[i];r=0,a=n;case 2:if(!(r<a.length)){t.next=9;break}return o=a[r],t.next=6,fetch(m+"?tvStationId=".concat(o),{method:"DELETE"});case 6:r++,t.next=2;break;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}();function y(t){return"?tvStationId=".concat(encodeURIComponent(t.id),"&m3u8=").concat(encodeURIComponent(t.m3u8),"&title=").concat(encodeURIComponent(t.title),"&sort=").concat(encodeURIComponent(t.sort))}var S=n(48),k=n(4),w=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).moveButtonClick=!1,t}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return Object(k.jsxs)("tr",{onClick:function(){t.moveButtonClick||t.props.onItemClick(),t.moveButtonClick=!1},children:[Object(k.jsx)("td",{children:this.props.station.id}),Object(k.jsx)("td",{children:this.props.station.title}),Object(k.jsx)("td",{children:Object(k.jsx)("p",{style:{wordWrap:"break-word",maxWidth:600},children:this.props.station.m3u8})}),Object(k.jsx)("td",{children:Object(k.jsxs)(S.a,{children:[Object(k.jsx)(v.a,{disabled:!this.props.moveUpEnabled,variant:"outline-primary",onClick:function(){t.moveButtonClick=!0,t.props.onMoveClick(!0)},children:"\u2191"}),Object(k.jsx)(v.a,{disabled:!this.props.moveDownEnabled,variant:"outline-primary",onClick:function(){t.moveButtonClick=!0,t.props.onMoveClick(!1)},children:"\u2193"})]})})]},this.props.station.id)}}]),n}(i.PureComponent),C=n(52),T=n(53),I=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={isSaving:!1,isDeleting:!1,inputTitle:"",inputM3u8:""},t}return Object(l.a)(n,[{key:"render",value:function(){var t,e=this;return Object(k.jsxs)(C.a,{show:!!this.props.editingStation,onHide:function(){return e.props.onHide(!1)},onShow:function(){var t,n;return e.setState({titleInvalid:!1,m3u8Invalid:!1,isSaving:!1,isDeleting:!1,inputTitle:(null===(t=e.props.editingStation)||void 0===t?void 0:t.title)||"",inputM3u8:(null===(n=e.props.editingStation)||void 0===n?void 0:n.m3u8)||""})},animation:!1,children:[Object(k.jsx)(C.a.Header,{closeButton:!0,children:Object(k.jsx)(C.a.Title,{children:"Edit TV Station"})}),Object(k.jsxs)(C.a.Body,{children:[Object(k.jsx)(T.a.Label,{children:"TV Station basic info."}),Object(k.jsxs)(T.a.Group,{children:[Object(k.jsx)(T.a.Control,{required:!0,value:this.state.inputTitle,onChange:function(t){return e.setState({inputTitle:t.target.value})},type:"text",isInvalid:!this.state.inputTitle,placeholder:"Title"}),Object(k.jsx)(T.a.Control.Feedback,{type:"invalid",children:"Please provide a valid title."})]}),Object(k.jsxs)(T.a.Group,{children:[Object(k.jsx)(T.a.Control,{required:!0,value:this.state.inputM3u8,onChange:function(t){return e.setState({inputM3u8:t.target.value})},type:"text",isInvalid:!this.state.inputM3u8,placeholder:"M3U8 URL"}),Object(k.jsx)(T.a.Control.Feedback,{type:"invalid",children:"Please provide a valid m3u8 url."})]})]}),Object(k.jsxs)(C.a.Footer,{children:[Object(k.jsx)(v.a,{hidden:!(null===(t=this.props.editingStation)||void 0===t?void 0:t.id),variant:"danger",onClick:function(){return e.delete()},children:this.state.isDeleting?Object(k.jsx)(b.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Delete"}),Object(k.jsx)("div",{style:{flex:1}}),Object(k.jsx)(v.a,{variant:"secondary",onClick:function(){return e.props.onHide(!1)},children:"Close"}),Object(k.jsx)(v.a,{variant:"primary",onClick:function(){return e.save()},children:this.state.isSaving?Object(k.jsx)(b.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Save changes"})]})]})}},{key:"save",value:function(){var t,e,n=this;this.state.inputTitle&&this.state.inputM3u8&&(this.setState({isSaving:!0}),g.insertOrUpdate({id:(null===(t=this.props.editingStation)||void 0===t?void 0:t.id)||0,m3u8:this.state.inputM3u8,title:this.state.inputTitle,sort:(null===(e=this.props.editingStation)||void 0===e?void 0:e.sort)||0}).then((function(){return n.props.onHide(!0)})))}},{key:"delete",value:function(){var t=this;this.props.editingStation&&this.props.editingStation.id&&(this.setState({isDeleting:!0}),g.delete(this.props.editingStation.id).then((function(){return t.props.onHide(!0)})))}}]),n}(i.Component),M=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).state={tvStations:null,editingStation:null},t.maxSort=0,t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var t=this,e=this.state.tvStations;return Object(k.jsxs)("div",{children:[Object(k.jsx)(h.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top",children:Object(k.jsx)(p.a,{children:Object(k.jsx)(h.a.Brand,{children:"Beryllium TV"})})}),Object(k.jsxs)(p.a,{fluid:!0,style:{marginTop:44,marginBottom:44},children:[Object(k.jsxs)(j.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"#"}),Object(k.jsx)("th",{children:"Title"}),Object(k.jsx)("th",{children:"m3u8"}),Object(k.jsx)("th",{children:"Sort"})]})}),Object(k.jsx)("tbody",{children:(e||[]).map((function(n,i){return Object(k.jsx)(w,{station:n,onItemClick:function(){return t.setState({editingStation:n})},onMoveClick:function(e){return t.move(n,e)},moveUpEnabled:0!==i,moveDownEnabled:i!==e.length-1},n.id)}))})]}),Object(k.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:null!=e?Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(k.jsxs)("p",{children:[e.length," station(s)"]}),Object(k.jsx)(v.a,{style:{width:240},variant:"primary",onClick:function(){return t.setState({editingStation:{id:0,m3u8:"",sort:t.maxSort+1,title:""}})},children:"Add TV Station"})]}):Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(k.jsx)(b.a,{hidden:null!=e,animation:"grow",variant:"primary"}),Object(k.jsx)("p",{children:"Loading saved stations"})]})})]}),Object(k.jsx)(I,{editingStation:this.state.editingStation,onHide:function(e){t.setState({editingStation:null}),e&&t.refresh()}})]})}},{key:"refresh",value:function(){var t=this;g.getAll().then((function(e){t.setState({tvStations:e});var n=e[e.length-1];t.maxSort=n?n.sort:0}))}},{key:"move",value:function(t,e){var n=this,i=Object(s.a)(this.state.tvStations||[]);if(i.length){var r=i.indexOf(t),a=r+(e?-1:1);i.splice(r,1),i.splice(a,0,t),i.forEach((function(t,e){return t.sort=e})),g.insertOrUpdate.apply(g,Object(s.a)(i)).then((function(){n.setState({tvStations:i})}))}}}]),n}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(45);o.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(M,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.b546ad73.chunk.js.map